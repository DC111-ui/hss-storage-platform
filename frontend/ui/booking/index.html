<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HSS Storage | Booking</title>
    <link rel="stylesheet" href="../styles.css" />
  </head>
  <body>
    <header class="top-nav">
      <div class="page-shell nav-inner">
        <a href="/" class="brand">HSS Storage</a>
        <nav aria-label="Primary">
          <a href="/auth/">Login</a>
          <a href="/dashboard/">Dashboard</a>
          <a href="/booking/" aria-current="page">New booking</a>
          <a href="/operations/">Operations</a>
        </nav>
      </div>
    </header>

    <main class="page-shell">
      <section class="section-space" aria-label="Booking wizard and checkout">
        <div class="section-header">
          <div>
            <p class="eyebrow">Booking and checkout</p>
            <h1>5-step booking flow with transparent pricing and staff review</h1>
            <p class="hint">Commercial readiness: backend-connected submission, auditable status transitions, and payment gating.</p>
          </div>
        </div>

        <div class="booking-layout">
          <section class="panel">
            <div class="api-config">
              <label for="api-base">Backend API base URL</label>
              <input id="api-base" type="url" placeholder="http://localhost:8081" />
              <p id="api-status" class="hint" aria-live="polite">Set this to your running backend to persist bookings.</p>
            </div>

            <ol class="stepper" aria-label="Checkout progress">
              <li class="active">1. Items</li>
              <li>2. Schedule</li>
              <li>3. Submit</li>
              <li>4. Staff review</li>
              <li>5. Pay</li>
            </ol>

            <form id="booking-form" class="stacked-form">
              <fieldset>
                <legend>Items</legend>
                <p class="hint">Add every item individually, including a catch-all <em>Other item</em> type. Upload a photo for each item (stored to S3 at pickup).</p>
                <div id="item-list" class="item-list" aria-live="polite"></div>

                <button id="add-item" type="button" class="btn btn-secondary">Add another item</button>

                <label for="duration">Storage duration (months)</label>
                <input id="duration" type="number" min="1" max="12" value="3" />
              </fieldset>

              <fieldset>
                <legend>Schedule</legend>
                <label for="pickup-date">Preferred pickup date</label>
                <input id="pickup-date" name="pickup-date" type="date" required />

                <label for="pickup-window">Pickup window</label>
                <select id="pickup-window" required>
                  <option value="">Select a window</option>
                  <option>08:00 – 11:00</option>
                  <option>10:00 – 13:00</option>
                  <option>13:00 – 16:00</option>
                </select>

                <label for="address">Pickup address</label>
                <textarea id="address" name="address" rows="3" required></textarea>
              </fieldset>

              <fieldset>
                <legend>Payment</legend>
                <label for="payment-method">Payment method</label>
                <select id="payment-method" required>
                  <option value="">Choose payment method</option>
                  <option>Card</option>
                  <option>EFT</option>
                  <option>Saved card ending in 1042</option>
                </select>

                <details>
                  <summary>Have a promo code?</summary>
                  <label for="promo-code">Promo code</label>
                  <input id="promo-code" type="text" placeholder="Enter promo code" />
                </details>
              </fieldset>

              <div class="action-row">
                <button id="estimate-btn" type="button" class="btn btn-secondary">Update estimate</button>
                <button type="submit" class="btn btn-primary">Submit for staff review</button>
                <button id="approve-order" type="button" class="btn btn-secondary" disabled>Mark as staff approved (demo)</button>
                <button id="proceed-payment" type="button" class="btn btn-primary" disabled>Proceed to payment</button>
              </div>
              <p id="form-status" class="hint" aria-live="polite"></p>
            </form>
          </section>

          <aside class="panel sticky-summary" aria-label="Order summary">
            <h2>Order summary</h2>
            <ul class="simple-list">
              <li>Total items: <strong id="items-summary">3</strong></li>
              <li>Items with photos: <strong id="photo-summary">0</strong></li>
              <li id="other-summary-row" class="is-hidden">Other items: <strong id="other-summary">0</strong></li>
              <li>Monthly subtotal: <strong id="summary-monthly">R 0.00</strong></li>
              <li>Duration: <strong id="summary-duration">3 months</strong></li>
              <li>Handling + pickup fee: <strong>R 350.00</strong></li>
              <li>Total due now: <strong id="summary-total">R 0.00</strong></li>
              <li>Review status: <strong id="review-status">Not submitted</strong></li>
            </ul>
            <p class="hint">Payment stays locked until a staff member reviews and approves your order.</p>
            <div id="thumbnail-preview" class="thumbnail-preview" aria-label="Uploaded item thumbnails"></div>
          </aside>
        </div>
      </section>
    </main>

    <script src="../app.js"></script>
  </body>
</html>
